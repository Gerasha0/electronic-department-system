<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è - –ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –∫–∞—Ñ–µ–¥—Ä–∞</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/dashboard.css">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ —Ç–µ–º—É">
        <svg class="sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
        </svg>
        <svg class="moon-icon" style="display: none;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
        </svg>
    </button>

    <header>
        <div class="header-content">
            <h1>üìö –ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –∫–∞—Ñ–µ–¥—Ä–∞</h1>
            <div class="user-info">
                <span id="user-name">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
                <button id="logout-btn" class="btn btn-secondary btn-sm">üö™ –í–∏—Ö—ñ–¥</button>
            </div>
        </div>
        <nav class="main-nav">
            <button class="nav-btn active" data-section="overview">üìä –û–≥–ª—è–¥</button>
            <button class="nav-btn" data-section="grades" id="grades-nav">üìù –û—Ü—ñ–Ω–∫–∏</button>
            <button class="nav-btn" data-section="users" id="users-nav">üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</button>
            <button class="nav-btn" data-section="teachers" id="teachers-nav">üë®‚Äçüè´ –í–∏–∫–ª–∞–¥–∞—á—ñ</button>
            <button class="nav-btn" data-section="students" id="students-nav">üéì –°—Ç—É–¥–µ–Ω—Ç–∏</button>
            <button class="nav-btn" data-section="groups" id="groups-nav">üë• –ì—Ä—É–ø–∏</button>
            <button class="nav-btn" data-section="subjects" id="subjects-nav">üìö –î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</button>
        </nav>
    </header>

    <main class="dashboard-main">
        <!-- Overview Section -->
        <section id="overview-section" class="section active">
            <h2>–û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏</h3>
                    <div id="system-stats">
                        <div class="loading"></div>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>üë§ –ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å</h3>
                    <div id="user-profile">
                        <div class="loading"></div>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>üìà –û—Å—Ç–∞–Ω–Ω—ñ –¥—ñ—ó</h3>
                    <div id="recent-activities">
                        <div class="loading"></div>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>‚ÑπÔ∏è –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–∞—Ñ–µ–¥—Ä—É</h3>
                    <div id="department-info">
                        <div class="loading"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Grades Section -->
        <section id="grades-section" class="section">
            <h2>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ—Ü—ñ–Ω–∫–∞–º–∏</h2>
            
            <div class="section-controls">
                <div class="filters">
                    <select id="grade-filter-subject">
                        <option value="">–í—Å—ñ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</option>
                    </select>
                    <select id="grade-filter-student">
                        <option value="">–í—Å—ñ —Å—Ç—É–¥–µ–Ω—Ç–∏</option>
                    </select>
                    <select id="grade-filter-type">
                        <option value="">–í—Å—ñ —Ç–∏–ø–∏</option>
                        <option value="CURRENT">–ü–æ—Ç–æ—á–Ω–∞</option>
                        <option value="MODULE">–ú–æ–¥—É–ª—å–Ω–∞</option>
                        <option value="MIDTERM">–ü—Ä–æ–º—ñ–∂–Ω–∞</option>
                        <option value="FINAL">–ü—ñ–¥—Å—É–º–∫–æ–≤–∞</option>
                        <option value="RETAKE">–ü–µ—Ä–µ–∑–¥–∞—á–∞</option>
                        <option value="MAKEUP">–í—ñ–¥–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è</option>
                    </select>
                    <button id="filter-grades" class="btn btn-primary">üîç –§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏</button>
                </div>
                <button id="add-grade-btn" class="btn btn-success">‚ûï –î–æ–¥–∞—Ç–∏ –æ—Ü—ñ–Ω–∫—É</button>
            </div>

            <div class="table-container">
                <table id="grades-table">
                    <thead>
                        <tr>
                            <th>üéì –°—Ç—É–¥–µ–Ω—Ç</th>
                            <th>üìö –î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞</th>
                            <th>üìã –¢–∏–ø</th>
                            <th>‚≠ê –û—Ü—ñ–Ω–∫–∞</th>
                            <th>üìÖ –î–∞—Ç–∞</th>
                            <th>‚öôÔ∏è –î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody id="grades-tbody">
                        <tr><td colspan="6"><div class="loading"></div></td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Users Section -->
        <section id="users-section" class="section">
            <h2>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏</h2>
            
            <div class="section-controls">
                <div class="filters">
                    <input type="text" id="user-search" placeholder="üîç –ü–æ—à—É–∫ –∑–∞ —ñ–º–µ–Ω–µ–º –∞–±–æ email...">
                    <select id="user-filter-role">
                        <option value="">–í—Å—ñ —Ä–æ–ª—ñ</option>
                        <option value="ADMIN">‚öôÔ∏è –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        <option value="MANAGER">üë• –ú–µ–Ω–µ–¥–∂–µ—Ä</option>
                        <option value="TEACHER">üë®‚Äçüè´ –í–∏–∫–ª–∞–¥–∞—á</option>
                        <option value="STUDENT">üéì –°—Ç—É–¥–µ–Ω—Ç</option>
                        <option value="GUEST">üë§ –ì—ñ—Å—Ç—å</option>
                    </select>
                    <button id="search-users" class="btn btn-primary">üîç –ü–æ—à—É–∫</button>
                </div>
                <button id="add-user-btn" class="btn btn-success">‚ûï –î–æ–¥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</button>
            </div>

            <div class="table-container">
                <table id="users-table">
                    <thead>
                        <tr>
                            <th>üë§ –Ü–º'—è</th>
                            <th>üìß Email</th>
                            <th>üé≠ –†–æ–ª—å</th>
                            <th>üìä –°—Ç–∞—Ç—É—Å</th>
                            <th>üìÖ –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è</th>
                            <th>‚öôÔ∏è –î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody id="users-tbody">
                        <tr><td colspan="6"><div class="loading"></div></td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Teachers Section -->
        <section id="teachers-section" class="section">
            <h2>–í–∏–∫–ª–∞–¥–∞—á—ñ</h2>
            
            <div class="section-controls">
                <div class="filters">
                    <input type="text" id="teacher-search" placeholder="üîç –ü–æ—à—É–∫ –≤–∏–∫–ª–∞–¥–∞—á—ñ–≤...">
                    <button id="search-teachers" class="btn btn-primary">üîç –ü–æ—à—É–∫</button>
                </div>
            </div>

            <div class="table-container">
                <table id="teachers-table">
                    <thead>
                        <tr>
                            <th>üë®‚Äçüè´ –Ü–º'—è</th>
                            <th>üìß Email</th>
                            <th>üè¢ –ö–∞—Ñ–µ–¥—Ä–∞</th>
                            <th>üìö –î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</th>
                            <th>‚öôÔ∏è –î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody id="teachers-tbody">
                        <tr><td colspan="5"><div class="loading"></div></td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Students Section -->
        <section id="students-section" class="section">
            <h2>–°—Ç—É–¥–µ–Ω—Ç–∏</h2>
            
            <div class="section-controls">
                <div class="filters">
                    <input type="text" id="student-search" placeholder="üîç –ü–æ—à—É–∫ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤...">
                    <button id="search-students" class="btn btn-primary">üîç –ü–æ—à—É–∫</button>
                </div>
            </div>

            <div class="table-container">
                <table id="students-table">
                    <thead>
                        <tr>
                            <th>üéì –Ü–º'—è</th>
                            <th>üìß Email</th>
                            <th>üë• –ì—Ä—É–ø–∞</th>
                            <th>üìñ –ö—É—Ä—Å</th>
                            <th>‚≠ê –°–µ—Ä–µ–¥–Ω—ñ–π –±–∞–ª</th>
                            <th>‚öôÔ∏è –î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody id="students-tbody">
                        <tr><td colspan="6"><div class="loading"></div></td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Groups Section -->
        <section id="groups-section" class="section">
            <h2>–ì—Ä—É–ø–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤</h2>
            
            <div class="section-controls">
                <div class="filters">
                    <input type="text" id="group-search" placeholder="üîç –ü–æ—à—É–∫ –≥—Ä—É–ø...">
                    <button id="search-groups" class="btn btn-primary">üîç –ü–æ—à—É–∫</button>
                </div>
                <button id="add-group" class="btn btn-success">‚ûï –î–æ–¥–∞—Ç–∏ –≥—Ä—É–ø—É</button>
            </div>

            <div class="table-container">
                <table id="groups-table">
                    <thead>
                        <tr>
                            <th>üë• –ù–∞–∑–≤–∞ –≥—Ä—É–ø–∏</th>
                            <th>üè∑Ô∏è –ö–æ–¥ –≥—Ä—É–ø–∏</th>
                            <th>üìñ –ö—É—Ä—Å</th>
                            <th>üìö –§–æ—Ä–º–∞ –Ω–∞–≤—á–∞–Ω–Ω—è</th>
                            <th>üéì –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤</th>
                            <th>üìÖ –†—ñ–∫ –≤—Å—Ç—É–ø—É</th>
                            <th>‚öôÔ∏è –î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody id="groups-tbody">
                        <tr><td colspan="7"><div class="loading"></div></td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Subjects Section -->
        <section id="subjects-section" class="section">
            <h2>–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</h2>
            
            <div class="section-controls">
                <div class="filters">
                    <input type="text" id="subject-search" placeholder="üîç –ü–æ—à—É–∫ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω...">
                    <button id="search-subjects" class="btn btn-primary">üîç –ü–æ—à—É–∫</button>
                </div>
                <button id="add-subject" class="btn btn-success">‚ûï –î–æ–¥–∞—Ç–∏ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω—É</button>
            </div>

            <div class="table-container">
                <table id="subjects-table">
                    <thead>
                        <tr>
                            <th>üìö –ù–∞–∑–≤–∞</th>
                            <th>üë®‚Äçüè´ –í–∏–∫–ª–∞–¥–∞—á</th>
                            <th>üí≥ –ö—Ä–µ–¥–∏—Ç–∏</th>
                            <th>üìÖ –°–µ–º–µ—Å—Ç—Ä</th>
                            <th>‚öôÔ∏è –î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody id="subjects-tbody">
                        <tr><td colspan="5"><div class="loading"></div></td></tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>
    </main>

    <!-- Modal for adding/editing -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modal-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h3>
            <div id="modal-body">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <!-- Subject Modal -->
    <div id="subjectModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="dashboard.closeSubjectModal()">&times;</span>
            <h3>üìö –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–æ—é</h3>
            <form id="subjectForm">
                <div class="form-group">
                    <label for="subject-name">üìù –ù–∞–∑–≤–∞ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏:</label>
                    <input type="text" id="subject-name" name="subjectName" required placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏">
                </div>
                
                <div class="form-group">
                    <label for="subject-code">üî¢ –ö–æ–¥ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏:</label>
                    <input type="text" id="subject-code" name="subjectCode" required placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: CS101">
                </div>
                
                <div class="form-group">
                    <label for="subject-credits">üí≥ –ö—Ä–µ–¥–∏—Ç–∏:</label>
                    <input type="number" id="subject-credits" name="credits" min="1" max="10" required placeholder="1-10">
                </div>
                
                <div class="form-group">
                    <label for="subject-semester">üìÖ –°–µ–º–µ—Å—Ç—Ä:</label>
                    <input type="number" id="subject-semester" name="semester" min="1" max="8" required placeholder="1-8">
                </div>
                
                <div class="form-group">
                    <label for="subject-hours-total">‚è∞ –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≥–æ–¥–∏–Ω:</label>
                    <input type="number" id="subject-hours-total" name="hoursTotal" min="1" required placeholder="–ó–∞–≥–∞–ª—å–Ω—ñ –≥–æ–¥–∏–Ω–∏">
                </div>
                
                <div class="form-group">
                    <label for="subject-hours-lectures">üìñ –ì–æ–¥–∏–Ω–∏ –ª–µ–∫—Ü—ñ–π:</label>
                    <input type="number" id="subject-hours-lectures" name="hoursLectures" min="0" value="0" placeholder="–ì–æ–¥–∏–Ω–∏ –ª–µ–∫—Ü—ñ–π">
                </div>
                
                <div class="form-group">
                    <label for="subject-hours-practical">üíº –ì–æ–¥–∏–Ω–∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–∏—Ö:</label>
                    <input type="number" id="subject-hours-practical" name="hoursPractical" min="0" value="0" placeholder="–ì–æ–¥–∏–Ω–∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–∏—Ö">
                </div>
                
                <div class="form-group">
                    <label for="subject-hours-laboratory">üî¨ –ì–æ–¥–∏–Ω–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏—Ö:</label>
                    <input type="number" id="subject-hours-laboratory" name="hoursLaboratory" min="0" value="0" placeholder="–ì–æ–¥–∏–Ω–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏—Ö">
                </div>
                
                <div class="form-group">
                    <label for="subject-assessment-type">üìä –¢–∏–ø –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è:</label>
                    <select id="subject-assessment-type" name="assessmentType" required>
                        <option value="">–û–±–µ—Ä—ñ—Ç—å —Ç–∏–ø –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è</option>
                        <option value="EXAM">üìù –ï–∫–∑–∞–º–µ–Ω</option>
                        <option value="TEST">‚úÖ –ó–∞–ª—ñ–∫</option>
                        <option value="CREDIT">üí≥ –ö—Ä–µ–¥–∏—Ç</option>
                        <option value="DIFFERENTIATED_CREDIT">üìä –î–∏—Ñ–µ—Ä–µ–Ω—Ü—ñ–π–æ–≤–∞–Ω–∏–π –∑–∞–ª—ñ–∫</option>
                        <option value="COURSE_WORK">üìÑ –ö—É—Ä—Å–æ–≤–∞ —Ä–æ–±–æ—Ç–∞</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="subject-description">üìÑ –û–ø–∏—Å:</label>
                    <textarea id="subject-description" name="description" rows="3" placeholder="–û–ø–∏—Å –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏ (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="subject-teacher">üë®‚Äçüè´ –í–∏–∫–ª–∞–¥–∞—á:</label>
                    <select id="subject-teacher" name="teacherId">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –≤–∏–∫–ª–∞–¥–∞—á–∞ (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)</option>
                    </select>
                </div>
                
                <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
                    <button type="button" class="btn btn-secondary" onclick="dashboard.closeSubjectModal()">‚ùå –°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/api-client.js"></script>
    <script src="/dashboard.js"></script>
    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = themeToggle.querySelector('.sun-icon');
        const moonIcon = themeToggle.querySelector('.moon-icon');
        
        // Check for saved theme preference or default to system preference
        const currentTheme = localStorage.getItem('theme') || 
          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        document.documentElement.setAttribute('data-theme', currentTheme);
        updateThemeIcon(currentTheme);
        
        themeToggle.addEventListener('click', () => {
          const currentTheme = document.documentElement.getAttribute('data-theme');
          const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
          
          document.documentElement.setAttribute('data-theme', newTheme);
          localStorage.setItem('theme', newTheme);
          updateThemeIcon(newTheme);
        });
        
        function updateThemeIcon(theme) {
          if (theme === 'dark') {
            sunIcon.style.display = 'block';
            moonIcon.style.display = 'none';
          } else {
            sunIcon.style.display = 'none';
            moonIcon.style.display = 'block';
          }
        }
        
        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
          if (!localStorage.getItem('theme')) {
            const newTheme = e.matches ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            updateThemeIcon(newTheme);
          }
        });
    </script>
</body>
</html>
